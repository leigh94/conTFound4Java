# 组合模式（Composite Pattern）
- 一种结构型设计模式，
- 它允许你将对象组合成树形结构来表示"部分-整体"的层次结构。
- 组合模式使得客户端可以统一地处理单个对象和组合对象。

## 核心思想
* 组合模式通过以下方式工作：
  1. 定义统一的组件接口 
  2. 叶子节点实现基础操作 
  3. 容器节点可以包含其他组件（叶子或其他容器） 
  4. 客户端无需区分处理的是单个对象还是组合对象

```textmate
组合模式的优点
简化客户端代码：客户端可以一致地使用单个对象和组合对象，无需关心处理的是单个对象还是组合对象。

更容易添加新类型的组件：新增的叶子节点或复合节点都可以很容易地加入到结构中，符合开闭原则。

组合模式的缺点
设计变得复杂：因为需要实现一个统一的接口，但有些方法在叶子节点和复合节点中的意义可能不同，比如在叶子节点中可能不支持添加子节点，那么就需要在叶子节点中抛出异常（或不提供实现），这可能会违反接口隔离原则。

使用场景
当你需要表示一个对象的部分-整体层次结构时。

你希望用户忽略组合对象与单个对象的不同，用户将统一地使用组合结构中的所有对象。

注意事项
在实现组合模式时，有时需要在组件接口中提供一些默认行为，比如在复合节点中管理子组件的方法（add, remove等），但在叶子节点中这些方法可能没有意义。你可以选择在组件接口中提供这些方法，然后在叶子节点中抛出异常（如UnsupportedOperationException），或者将管理子组件的方法只放在复合节点中，但这会破坏透明性，因为客户端需要知道叶子节点和复合节点的区别。

另一种做法是将组件接口拆分为两个接口，一个用于叶子节点，一个用于复合节点，但这会使得客户端不能一致地对待叶子节点和复合节点。

因此，在实际应用中，需要根据具体需求来权衡。

希望这个详细的解释和示例能帮助你理解组合模式。
```


```text
组合模式的优缺点
优点
简化客户端代码：客户端可以一致地处理单个对象和组合对象

易于添加新组件：新增组件类型无需修改现有代码

灵活性：可以构建复杂的树形结构

符合开闭原则

缺点
设计复杂：需要仔细设计接口，确保所有组件都有意义的行为

类型安全问题：在透明式中，叶子节点需要实现不需要的方法

难以限制组件类型：在某些情况下可能难以限制组合中可以包含的组件类型

适用场景
需要表示对象的部分-整体层次结构

希望客户端忽略组合对象与单个对象的差异
处理树形结构数据

GUI开发中的容器和组件

文件系统

组织结构图

菜单系统

组合模式通过统一的方式处理单个对象和组合对象，使得客户端代码更加简洁和灵活，是处理层次结构数据的强大工具。
```